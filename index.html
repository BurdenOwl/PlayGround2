<!DOCTYPE html>
<html lang="en">
<head id="lockDown2">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Locker 4</title>
    <style>
        .hidden {
            display: none;
        }
    </style>
</head>
<body id="lockDown" class="hidden">

    <p>funny hahahahahahahhahaha</p>

    <script src="assets/js/script.js"></script>
    <script>
        const previousFlag1 = "37f13b5cd79434ba0bb8f89a95e227f881a8a17d535f6a71ff4d221e8f7a2e62";
        const previousFlag2 = "b1fc7cae5c24f2625866f490e53b17f4e4ddb30c33d6422ff650dce5a8345253";
        const previousFlag3 = "020dd3dc162a25483a5648c8ea007dc379ed5cb922f5cc7e4d2c48b3b69cc354";
        let questionNumber = 1;

        const hashData = async (data) => {
            const encodedData = new TextEncoder().encode(data);
            const hashBuffer = await crypto.subtle.digest("SHA-256", encodedData);
            return Array.prototype.slice.call(new Uint8Array(hashBuffer)).map(b => b.toString(16).padStart(2, '0')).join('');
        };

        const doubleCheck = async () => {
            let locked = document.getElementById('lockDown');
            let locked2 = document.getElementById('lockDown2');

            if (questionNumber == 1) {
                const question = prompt("To continue, please enter the key for Locker1");
                if (previousFlag1 !== await hashData(question.toUpperCase())) {
                    locked.innerHTML = ``;
                    locked2.innerHTML = ``;
                    return;
                };
            } else if (questionNumber == 2) {
                const question = prompt("To continue, please enter the key for Locker2");
                if (previousFlag2 !== await hashData(question.toUpperCase())) {
                    locked.innerHTML = ``;
                    locked2.innerHTML = ``;
                    return;
                };
            } else if (questionNumber == 3) {
                const question = prompt("To continue, please enter the key for Locker3");
                if (previousFlag3 !== await hashData(question.toUpperCase())) {
                    locked.innerHTML = ``;
                    locked2.innerHTML = ``;
                    return;
                };
            };
            
            questionNumber = questionNumber + 1;

            if (questionNumber == 4) {
                locked.classList.remove("hidden");
                return;
            };

            doubleCheck();
        };

        doubleCheck();
    </script>
</body>
</html>